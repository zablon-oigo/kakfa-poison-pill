groups:
  - name: consumer_alerts
    rules:
      - alert: PoisonPillDetected
        expr: rate(poison_pills_total[1m]) > 0
        for: 0m
        labels:
          severity: critical
        annotations:
          summary: "CRITICAL: Kafka Consumer detected a poison pill."
          description: "Bad messages detected in 'marks' topic. Check 'marks_dlq' topic in Kafka."
